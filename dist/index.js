"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),recoil=require("recoil");function _interopDefaultLegacy(a){return a&&"object"==typeof a&&"default"in a?a:{default:a}}var React__default=_interopDefaultLegacy(React);function _arrayLikeToArray(b,c){(null==c||c>b.length)&&(c=b.length);for(var d=0,f=Array(c);d<c;d++)f[d]=b[d];return f}function _classCallCheck(b,a){if(!(b instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,_toPropertyKey(c.key),c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function _createForOfIteratorHelper(b,c){var d="undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(!d){if(Array.isArray(b)||(d=_unsupportedIterableToArray(b))||c&&b&&"number"==typeof b.length){d&&(b=d);var e=0,f=function(){};return{s:f,n:function(){return e>=b.length?{done:!0}:{done:!1,value:b[e++]}},e:function(a){throw a},f:f}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var g,h=!0,i=!1;return{s:function(){d=d.call(b)},n:function(){var a=d.next();return h=a.done,a},e:function(a){i=!0,g=a},f:function(){try{h||null==d.return||d.return()}finally{if(i)throw g}}}}function _defineProperty(a,b,c){return(b=_toPropertyKey(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread2(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _toPrimitive(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}function _toPropertyKey(a){var b=_toPrimitive(a,"string");return"symbol"==typeof b?b:b+""}function _unsupportedIterableToArray(b,c){if(b){if("string"==typeof b)return _arrayLikeToArray(b,c);var a={}.toString.call(b).slice(8,-1);return"Object"===a&&b.constructor&&(a=b.constructor.name),"Map"===a||"Set"===a?Array.from(b):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(b,c):void 0}}console.log(React__default["default"]);var pickValues=function(a,b){if(!b||"*"===b)return a;if(!b.endsWith("*"))return a[b];if(b.endsWith("*")){var c={},d=b.substr(0,b.length-1);for(var e in a)e.startsWith(d)&&(c[e]=a[e]);return c}return{}},RecoilState=function(){function a(){_classCallCheck(this,a),this.state={},this.subscriptions=[],this.onChange=function(){}}return _createClass(a,[{key:"setState",value:function(a){this.onChange(this.state,a),this.state=a,this.serveSubscriptions()}},{key:"getKeys",value:function(){return Object.keys(this.state)}},{key:"getState",value:function(){return _objectSpread2({},this.state)}},{key:"setSubscriptions",value:function(a,b){this.subscriptions=a,b&&(this.reactotron=b),this.serveSubscriptions()}},{key:"serveSubscriptions",value:function(){var a,b=this;(null===(a=this.reactotron)||void 0===a?void 0:a.stateValuesChange)&&this.reactotron.stateValuesChange(this.subscriptions.map(function(a){return{path:a,value:pickValues(b.state,a)}}))}}])}(),MainRecoilState=new RecoilState,RecoilObserver=function(){var a=recoil.useRecoilSnapshot();return React.useEffect(function(){var b,c={},d=_createForOfIteratorHelper(a.getNodes_UNSTABLE());try{for(d.s();!(b=d.n()).done;){var e,f=b.value,g=a.getInfo_UNSTABLE(f);c[f.key]=null===(e=g.loadable)||void 0===e?void 0:e.contents}}catch(a){d.e(a)}finally{d.f()}MainRecoilState.setState(c)},[a]),React__default["default"].createElement(React__default["default"].Fragment,null)},ReactotronRecoilRoot=function(a){return React__default["default"].createElement(recoil.RecoilRoot,a,React__default["default"].createElement(RecoilObserver,null),a.children)},reactotronRecoil=function(){return function(a){return{onCommand:function(b){var c=b.type,d=b.payload;"state.keys.request"===c||"state.values.request"===c?!d.path&&a.stateKeysResponse&&a.stateKeysResponse(null,"state.keys.request"===c?Object.keys(MainRecoilState.getKeys()):MainRecoilState.getState()):"state.backup.request"===c?a.send("state.backup.response",{state:MainRecoilState.getState()}):"state.values.subscribe"===c?MainRecoilState.setSubscriptions(d.paths,a):void 0}}}};exports.ReactotronRecoilRoot=ReactotronRecoilRoot,exports.reactotronRecoil=reactotronRecoil;
